<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Invoice & Receipt Generator</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9768490093098454"
          crossorigin="anonymous"></script>
</head>
<body>
<nav>
  <div class="nav-left">
    <div class="logo" onclick="location.reload()">
      IR Generator
    </div>
  </div>
  <div class="nav-right">
    <button class="theme-toggle" onclick="toggleDarkMode()" id="themeBtn">üåô Dark Mode</button>
    <span style="font-weight: bold;color:white;">Support <i class="fa-solid fa-hand-point-right"></i></span>
    <a href="https://buymeacoffee.com/fervtech" target="_blank" class="buy-coffee">‚òï Buy Me Coffee</a>
    <button id="paystackBtn" class="buy-coffee" style="background:#04AA6D;color:white;">Mobile money</button>
  </div>
</nav>

<main class="container">
  <div class="header">
    <h1>Invoice/Receipt Generator</h1>
    <p>Create professional invoices and receipts instantly</p>
  </div>

  <div class="form-card">
    <form id="invoiceForm" onsubmit="generatePDF(event)">
      <div class="section-title">Company Information</div>
      <div class="form-row">
        <div class="form-group">
          <label for="companyName">Company Name</label>
          <input type="text" id="companyName" placeholder="Enter your company name" required>
        </div>
        <div class="form-group">
          <label for="companyContact">Contact Number</label>
          <input type="tel" id="companyContact" placeholder="Enter contact number" required>
        </div>
      </div>

      <div class="form-row full">
        <div class="form-group">
          <label>Company Logo (Optional)</label>
          <div class="logo-upload-container" onclick="document.getElementById('logoUpload').click()">
            <p>üìÅ Click to upload logo</p>
            <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">Recommended: 150x80px, PNG or JPG</p>
            <input type="file" id="logoUpload" accept="image/*" onchange="handleLogoUpload(event)">
            <div class="logo-preview" id="logoPreview">
              <img id="logoPreviewImg" src="" alt="Logo Preview">
              <button type="button" class="remove-logo" onclick="removeLogo()">Remove Logo</button>
            </div>
          </div>
        </div>
      </div>

      <div class="section-title">Document Details</div>
      <div class="form-row">
        <div class="form-group">
          <label for="docType">Document Type</label>
          <select id="docType" required>
            <option value="">Select document type</option>
            <option value="Invoice">Invoice</option>
            <option value="Receipt">Receipt</option>
          </select>
        </div>
        <div class="form-group">
          <label for="currency">Currency</label>
          <select id="currency" required>
            <option value="GHS">Ghanaian Cedi (‚Çµ)</option>
            <option value="USD">US Dollar ($)</option>
            <option value="EUR">Euro (‚Ç¨)</option>
            <option value="GBP">British Pound (¬£)</option>
            <option value="NGN">Nigerian Naira (‚Ç¶)</option>
            <option value="ZAR">South African Rand (R)</option>
            <option value="KES">Kenyan Shilling (KSh)</option>
            <option value="INR">Indian Rupee (‚Çπ)</option>
            <option value="JPY">Japanese Yen (¬•)</option>
            <option value="AUD">Australian Dollar (A$)</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="paymentMethod">Payment Method</label>
          <select id="paymentMethod" required>
            <option value="">Select payment method</option>
            <option value="Mobile Money">Mobile Money</option>
            <option value="Card">Card</option>
            <option value="Cheque">Cheque</option>
            <option value="Bank Transfer">Bank Transfer</option>
            <option value="Cash">Cash</option>
          </select>
        </div>
      </div>

      <div class="section-title">Customer Information</div>
      <div class="form-row">
        <div class="form-group">
          <label for="customerName">Customer Name</label>
          <input type="text" id="customerName" placeholder="Enter customer name" required>
        </div>
        <div class="form-group">
          <label for="customerContact">Customer Contact</label>
          <input type="tel" id="customerContact" placeholder="Enter customer contact" required>
        </div>
      </div>

      <div class="section-title">Items & Services</div>
      <div class="items-section">
        <div id="items-container" class="items-container"></div>
        <button type="button" class="add-item-btn" onclick="addItem()">+ Add Item</button>
      </div>

      <!-- Tax & Discount Section - Add this RIGHT BEFORE the <div id="total" class="hidden">Total: $0.00</div> -->
      <div class="tax-discount-section">
        <div class="form-row">
          <div class="form-group">
            <label for="taxRate">Tax/VAT/GST Rate (%)</label>
            <input type="number" id="taxRate" placeholder="0" min="0" max="100" step="0.01"
                   onchange="calculateTotal()" style="width: 100%;">
          </div>
          <div class="form-group">
            <label for="discount">Discount</label>
            <div style="display: flex; gap: 10px;">
              <input type="number" id="discount" placeholder="0" min="0" step="0.01"
                     onchange="calculateTotal()" style="flex: 1;">
              <select id="discountType" onchange="calculateTotal()" style="width: 120px;">
                <option value="amount">Amount</option>
                <option value="percent">Percent</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Keep your existing total div but update it -->
      <div id="total" class="hidden" style="text-align: right; margin: 20px 0; padding: 15px; background: #f5f7fa; border-radius: 8px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <span>Subtotal:</span>
          <span id="subtotalDisplay">‚Çµ0.00</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;" id="taxDisplayRow">
          <span>Tax (0%):</span>
          <span id="taxDisplay">‚Çµ0.00</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;" id="discountDisplayRow">
          <span>Discount:</span>
          <span id="discountDisplay">‚Çµ0.00</span>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; padding-top: 10px; border-top: 2px solid #667eea;">
          <span>Total:</span>
          <span id="totalDisplay">‚Çµ0.00</span>
        </div>
      </div>



      <!-- Replace your single submit button with these two buttons -->
      <div style="display: flex; gap: 15px; margin-top: 20px;">
        <button type="button" class="preview-btn" onclick="showPreview()"
                style="background: #4CAF50; color: white; padding: 15px; border: none; border-radius: 8px; cursor: pointer; flex: 1; font-weight: 600;">
          üëÅÔ∏è Preview
        </button>
        <button type="submit" class="submit-btn"
                style="background: #667eea; color: white; padding: 15px; border: none; border-radius: 8px; cursor: pointer; flex: 1; font-weight: 600;">
          üìÑ Download PDF
        </button>
      </div>
    </form>
  </div>


  <!-- Preview Modal -->
  <div id="previewModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);">
    <div style="background: white; margin: 5% auto; padding: 0; width: 90%; max-width: 800px; border-radius: 12px; max-height: 90vh; overflow: hidden;">
      <div style="padding: 20px; background: #667eea; color: white; display: flex; justify-content: space-between; align-items: center;">
        <h2 style="margin: 0;">Document Preview</h2>
        <button onclick="closePreview()" style="background: none; border: none; color: white; font-size: 28px; cursor: pointer;">&times;</button>
      </div>
      <div id="previewContent" style="padding: 30px; max-height: 70vh; overflow-y: auto;"></div>
      <div style="padding: 20px; border-top: 1px solid #e0e0e0; text-align: right;">
        <button onclick="closePreview()" style="background: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; margin-right: 10px;">
          Close
        </button>
        <button onclick="generatePDFFromPreview()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">
          Generate PDF
        </button>
      </div>
    </div>
  </div>
</main>

<footer>
  <p>&copy; 2025 Invoice & Receipt Generator. All rights reserved ¬© <strong>fervtech</strong></p>
  <div class="footer-links">
    <a href="https://fervtech.com" target="_blank">Website</a>
    <a href="https://twitter.com/fervtech" target="_blank">Twitter</a>
    <a href="https://github.com/fervtech" target="_blank">GitHub</a>
    <a href="https://buymeacoffee.com/fervtech" target="_blank">Support</a>
  </div>
  <p style="margin-top: 15px; font-size: 12px; opacity: 0.8;">Made with ‚ù§Ô∏è by fervtech</p>
</footer>

<script src="js/app.js"></script>

<!-- Paystack (donation only) -->
<script src="https://js.paystack.co/v1/inline.js"></script>
<script src="js/paystack.js"></script>

</body>

</html>

