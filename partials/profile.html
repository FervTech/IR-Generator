<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profile | IR Generator</title>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard-body">

<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="logo"><div class="logo-icon"><i class="fas fa-file-invoice"></i></div><span class="logo-text">IR Generator</span></div>
    <button class="sidebar-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
  </div>
  <nav class="sidebar-nav">
    <a href="../pages/dashboard.html" class="nav-item"><i class="fas fa-home"></i><span>Dashboard</span></a>
    <a href="create-invoice.html" class="nav-item"><i class="fas fa-plus-circle"></i><span>New Invoice</span></a>

    <a href="invoices.html" class="nav-item"><i class="fas fa-file-invoice"></i><span>Invoices</span><span class="badge">0</span></a>
    <a href="create-receipt.html" class="nav-item"><i class="fas fa-plus-circle"></i><span>New Receipt</span></a>

    <a href="receipts.html" class="nav-item"><i class="fas fa-receipt"></i><span>Receipts</span><span class="badge">0</span></a>
    <a href="clients.html" class="nav-item"><i class="fas fa-users"></i><span>Clients</span></a>
    <a href="analytics.html" class="nav-item"><i class="fas fa-chart-line"></i><span>Analytics</span><span class="pro-badge">PRO</span></a>
    <a href="templates.html" class="nav-item"><i class="fas fa-palette"></i><span>Templates</span><span class="pro-badge">PRO</span></a>
    <div class="nav-divider"></div>

  </nav>
  <div class="sidebar-footer">
    <div class="plan-card"><div class="plan-icon"><i class="fas fa-gift"></i></div><div class="plan-info"><strong>Free Plan</strong><p>Basic features</p></div><a href="/pricing.html" class="btn-upgrade"><i class="fas fa-crown"></i>Upgrade</a></div>
  </div>
</aside>

<div class="dashboard-main">
  <header class="topbar">
    <button class="mobile-menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
    <div class="topbar-search"><i class="fas fa-search"></i><input type="text" placeholder="Search..."></div>
    <div class="topbar-actions">
      <button class="theme-toggle" onclick="toggleDarkMode()" id="themeBtn"><i class="fas fa-moon"></i></button>
      <button class="notification-btn"><i class="fas fa-bell"></i></button>
      <div class="user-menu">
        <button class="user-menu-btn" onclick="toggleUserMenu()"><div class="user-avatar"><i class="fas fa-user"></i></div><span class="user-name">Demo User</span><i class="fas fa-chevron-down"></i></button>
        <div class="user-dropdown" id="userDropdown">
          <a href="profile.html" class="dropdown-item"><i class="fas fa-user"></i>My Profile</a>
          <a href="settings.html" class="dropdown-item"><i class="fas fa-cog"></i>Settings</a>
          <div class="dropdown-divider"></div>
          <button onclick="handleLogout()" class="dropdown-item"><i class="fas fa-sign-out-alt"></i>Sign Out</button>
        </div>
      </div>
    </div>
  </header>

  <div class="dashboard-content">
    <div class="page-header">
      <div class="page-title-group"><h1 class="page-title"><i class="fas fa-user"></i>My Profile</h1><p class="page-subtitle">Manage your personal and company information</p></div>
    </div>

    <div class="profile-grid">
      <!-- Personal Information -->
      <div class="profile-card">
        <div class="profile-card-header"><h3><i class="fas fa-user-circle"></i>Personal Information</h3></div>
        <div class="profile-card-body">
          <div class="profile-avatar-section">
            <div class="profile-avatar-large" id="avatarPreview"><i class="fas fa-user"></i></div>
            <div class="avatar-upload-controls">
              <input type="file" id="avatarInput" accept="image/*" onchange="handleAvatarUpload()" hidden>
              <button class="btn-upload" onclick="document.getElementById('avatarInput').click()"><i class="fas fa-camera"></i>Change Photo</button>
              <button class="btn-remove" onclick="removeAvatar()"><i class="fas fa-trash"></i>Remove</button>
            </div>
          </div>
          <div class="form-grid">
            <div class="form-group"><label>First Name</label><input type="text" id="firstName" class="form-input" value="Demo"></div>
            <div class="form-group"><label>Last Name</label><input type="text" id="lastName" class="form-input" value="User"></div>
            <div class="form-group"><label>Email Address</label><input type="email" id="email" class="form-input" value="demo@example.com"></div>
            <div class="form-group"><label>Phone Number</label><input type="tel" id="phone" class="form-input" value="+233 24 000 0000"></div>
          </div>
          <div class="form-group full-width"><label>Bio</label><textarea id="bio" class="form-input" rows="3" placeholder="Tell us about yourself..."></textarea></div>
          <button class="btn-save" onclick="savePersonalInfo()"><i class="fas fa-save"></i>Save Changes</button>
        </div>
      </div>

      <!-- Company Information -->
      <div class="profile-card">
        <div class="profile-card-header"><h3><i class="fas fa-building"></i>Company Information</h3></div>
        <div class="profile-card-body">
          <div class="form-grid">
            <div class="form-group"><label>Company Name</label><input type="text" id="companyName" class="form-input" value="My Company"></div>
            <div class="form-group"><label>Registration Number</label><input type="text" id="regNumber" class="form-input" placeholder="REG-123456"></div>
            <div class="form-group full-width"><label>Address</label><input type="text" id="address" class="form-input" placeholder="Street address"></div>
            <div class="form-group"><label>City</label><input type="text" id="city" class="form-input" placeholder="Accra"></div>
            <div class="form-group"><label>Country</label><select id="country" class="form-select"><option>Ghana</option><option>Nigeria</option><option>Kenya</option><option>South Africa</option></select></div>
            <div class="form-group"><label>Website</label><input type="url" id="website" class="form-input" placeholder="https://example.com"></div>
            <div class="form-group"><label>Tax ID</label><input type="text" id="taxId" class="form-input" placeholder="VAT/TIN"></div>
          </div>
          <div class="company-logo-section">
            <label>Company Logo</label>
            <div class="logo-upload-zone" onclick="document.getElementById('logoInput').click()">
              <div id="logoPreview" class="logo-preview-area"><i class="fas fa-image"></i><p>Click to upload logo</p></div>
              <input type="file" id="logoInput" accept="image/*" onchange="handleLogoUpload()" hidden>
            </div>
          </div>
          <button class="btn-save" onclick="saveCompanyInfo()"><i class="fas fa-save"></i>Save Changes</button>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="profile-card">
        <div class="profile-card-header"><h3><i class="fas fa-cog"></i>Account Settings</h3></div>
        <div class="profile-card-body">
          <div class="plan-info-box">
            <div class="plan-badge-large">FREE</div>
            <h4>Free Plan</h4>
            <p>0 / 3 invoices used</p>
            <a href="../pages/pricing.html" class="btn-upgrade-plan"><i class="fas fa-crown"></i>Upgrade to PRO</a>
          </div>
          <div class="account-meta">
            <div class="meta-item"><strong>Account Created:</strong><span>Jan 15, 2025</span></div>
            <div class="meta-item"><strong>Last Login:</strong><span>Feb 7, 2025 at 10:30 AM</span></div>
            <div class="meta-item"><strong>Account ID:</strong><span>USER-12345</span></div>
          </div>
        </div>
      </div>

      <!-- Preferences -->
      <div class="profile-card">
        <div class="profile-card-header"><h3><i class="fas fa-sliders-h"></i>Preferences</h3></div>
        <div class="profile-card-body">
          <div class="form-group"><label>Default Currency</label><select id="defaultCurrency" class="form-select"><option>GHS - Ghanaian Cedi (₵)</option><option>USD - US Dollar ($)</option><option>EUR - Euro (€)</option><option>GBP - British Pound (£)</option></select></div>
          <div class="form-group"><label>Date Format</label><select id="dateFormat" class="form-select"><option>MM/DD/YYYY</option><option>DD/MM/YYYY</option><option>YYYY-MM-DD</option></select></div>
          <div class="form-group"><label>Invoice Prefix</label><input type="text" id="invoicePrefix" class="form-input" value="INV" placeholder="INV"></div>
          <div class="preference-toggle"><label>Email Notifications</label><label class="toggle-switch"><input type="checkbox" id="emailNotif" checked><span class="toggle-slider"></span></label></div>
          <button class="btn-save" onclick="savePreferences()"><i class="fas fa-save"></i>Save Preferences</button>
        </div>
      </div>

      <!-- Security -->
      <div class="profile-card">
        <div class="profile-card-header"><h3><i class="fas fa-shield-alt"></i>Security</h3></div>
        <div class="profile-card-body">
          <h4>Change Password</h4>
          <div class="form-group"><label>Current Password</label><input type="password" id="currentPassword" class="form-input"></div>
          <div class="form-group"><label>New Password</label><input type="password" id="newPassword" class="form-input"></div>
          <div class="form-group"><label>Confirm Password</label><input type="password" id="confirmPassword" class="form-input"></div>
          <button class="btn-save" onclick="changePassword()"><i class="fas fa-key"></i>Update Password</button>
          <div class="security-divider"></div>
          <div class="preference-toggle"><label><strong>Two-Factor Authentication</strong><span class="label-hint">Add an extra layer of security</span></label><label class="toggle-switch"><input type="checkbox" id="twoFactor"><span class="toggle-slider"></span></label></div>
          <div class="security-divider"></div>
          <h4>Active Sessions</h4>
          <div class="session-list">
            <div class="session-item"><i class="fas fa-desktop"></i><div><strong>Chrome on Windows</strong><span>Current session • Accra, Ghana</span></div></div>
          </div>
          <button class="btn-danger-outline" onclick="signOutAll()"><i class="fas fa-sign-out-alt"></i>Sign Out All Devices</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="toastContainer" class="toast-container"></div>
<script src="../js/auth.js"></script>
<script src="../js/utilities/sanitizer.js"></script>
<script src="../js/profile.js"></script>
<script src="../js/global-settings.js"></script>
<script src="../js/utilities/utilities.js"></script>
<script src="../js/utilities/toast-messages.js"></script>
<script src="../js/settings.js"></script>
</body>
</html>
